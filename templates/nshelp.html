
{% extends "container.html" %}

{% block scripts %}

<link href="{{ url_for('static', filename='jquery-ui.css') }}" rel="stylesheet" type="text/css">

{% endblock %}

{% block content %}

<div class="help">

   <h2>Velkomin(n) í Netskrafl!</h2>

   <div id="tabs">
   <ul>
      <li><a href="#tabs-1">Hjálp</a></li>
      <li><a href="#tabs-2">Tveggja stafa orð</a></li>
      <li><a href="#tabs-3">Nýlegar viðureignir</a></li>
      <li><a href="#tabs-4">Notendur</a></li>
      <li><a href="#tabs-5">Um Netskrafl</a></li>
   </ul>

   <div id="tabs-1">
   <p>Í Netskrafli getur þú spilað skrafl við tölvu. Leikreglurnar eru eins og í
   hefðbundnu borðskrafli, en aðeins eru leyfð orð sem fyrirfinnast í
   <a href="http://bin.arnastofnun.is/forsida/" target="_blank">Beygingarlýsingu íslensks
   nútímamáls</a> - og tveggja stafa orð
   samkvæmt lista Skraflfélags Íslands. Ekki er því unnt að véfengja orð sem tölvan
   leggur niður, né er hægt að leggja niður önnur orð en þau sem eru í orðalistunum.</p>
   <p>Í upphafi leiks hefur þú sjö stafaflísar sem sýndar eru í rekkanum fyrir neðan
   borðið. Þú leggur þær niður með því að draga þær með músinni (smella á flís,
   draga hana á réttan stað og sleppa músarhnappnum). Einnig má nota fingur til
   að draga flísar á spjaldtölvum og snertiskjám. Þú getur flutt flísar til á
   borðinu eða dregið þær til baka í rekkann ef þú færð bakþanka.
   <strong>Esc</strong> hnappurinn á lyklaborðinu sendir allar flísar til baka í rekkann,
   en <strong>Backspace</strong> endurraðar rekkanum af handahófi.</p>
   <p>Þegar þú hefur lagt niður orð eins og þú vilt hafa það smellirðu
   á græna hnappinn
   <img src="{{ url_for('static', filename='Leika.png') }}" width=53 height=20 border=0>.
   Tölvan svarar að bragði með sínum leik og þá
   er röðin aftur komin að þér. Nýjar flísar sem tölvan leggur niður eru sýndar
   með grænum lit á borðinu.</p>
   <p>Ef þú getur ekki lagt niður orð og vilt sitja hjá smellirðu á
   appelsínugula hnappinn
   <img src="{{ url_for('static', filename='Pass.png') }}" width=20 height=20 border=0>.
   Þá færð þú ekki stig heldur leikur tölvan strax næsta leik.</p>
   <p>Ef þú vilt skipta út flísum í rekkanum smellirðu á græna hnappinn
   <img src="{{ url_for('static', filename='Exchange.png') }}" width=20 height=20 border=0>.
   Þú þarft að velja þær flísar sem þú vilt skipta með því að smella á þær. Þegar
   skiptin hafa farið fram færðu ekki stig heldur á tölvan næsta leik. Ef færri
   en sjö flísar eru eftir í "pokanum" er ekki hægt að skipta.</p>
   <p>Viðureign er lokið þegar síðasta flísin hefur verið lögð niður, eða ef
   báðir leikmenn hafa setið hjá þrisvar í röð (sex sinnum alls). Þú getur
   einnig gefið leikinn með því að smella á rauða hnappinn
   <img src="{{ url_for('static', filename='Resign.png') }}" width=20 height=20 border=0>.</p>
   </div>

   <div id="tabs-5">
   <p>Höfundur Netskrafls er <a href="http://blog.pressan.is/vthorsteinsson" target="_blank">Vilhjálmur Þorsteinsson</a>.</p>
   <p>Netskrafl notar Google Accounts aðgang og innskráningu til að auðkenna
   notendur. Þú getur
   <a href="{{ url_for('userprefs') }}">breytt notandanafninu þínu</a>
   með því að smella á það í dálkhausnum hægra megin á skjánum.
   Netskrafl sækir hvorki né geymir persónuupplýsingar.</p>
   <p>Taktu þátt í þróun Netskrafls með því að
   <a href="https://www.facebook.com/groups/828426797220211/" target="_blank">ganga í fésbókarhópinn</a>!</p>
   <p>Frumforrit Netskrafls eru <a href="https://github.com/vthorsteinsson/Netskrafl" target="_blank">opin á GitHub</a>.</p>
   <p>Höfundarréttur að
   <i>Beygingarlýsingu íslensks nútímamáls</i> er á hendi Stofnunar
   Árna Magnússonar í íslenskum fræðum. BÍN er notuð í Netskrafli skv.
   <a href="http://bin.arnastofnun.is/gogn/skilmalar/" target="_blank">skilmálum SÁM</a>.</p>
   </div>

   <div id="tabs-2">
   <p>Netskrafl leyfir tveggja stafa orð sem eru á lista Skraflfélags Íslands
   eins og hann var á Íslandsmóti í Skrafli 2014. Þau eru eftirfarandi:</p>
   <div class="twolist">
   <div class="twoline">
   <span class="twoword">að</span> <span class="twoword">af</span> <span class="twoword">ak</span> <span class="twoword">al</span> <span class="twoword">an</span> <span class="twoword">ar</span> <span class="twoword">as</span> <span class="twoword">at</span> <span class="twoword">ax</span>
   </div>
   <div class="twoline">
   <span class="twoword">áa</span> <span class="twoword">áð</span> <span class="twoword">ái</span> <span class="twoword">ál</span> <span class="twoword">ám</span> <span class="twoword">án</span> <span class="twoword">ár</span> <span class="twoword">ás</span> <span class="twoword">át</span>
   </div>
   <div class="twoline">
   <span class="twoword">bí</span> <span class="twoword">bú</span> <span class="twoword">bý</span> <span class="twoword">bæ</span>
   </div>
   <div class="twoline">
   <span class="twoword">dá</span> <span class="twoword">do</span> <span class="twoword">dó</span> <span class="twoword">dý</span>
   </div>
   <div class="twoline">
   <span class="twoword">eð</span> <span class="twoword">ef</span> <span class="twoword">eg</span> <span class="twoword">ei</span> <span class="twoword">ek</span> <span class="twoword">el</span> <span class="twoword">em</span> <span class="twoword">en</span> <span class="twoword">er</span> <span class="twoword">et</span> <span class="twoword">ex</span> <span class="twoword">ey</span>
   </div>
   <div class="twoline">
   <span class="twoword">ég</span> <span class="twoword">él</span> <span class="twoword">ét</span>
   </div>
   <div class="twoline">
   <span class="twoword">fa</span> <span class="twoword">fá</span> <span class="twoword">fé</span> <span class="twoword">fæ</span>
   </div>
   <div class="twoline">
   <span class="twoword">gá</span>
   </div>
   <div class="twoline">
   <span class="twoword">ha</span> <span class="twoword">há</span> <span class="twoword">hí</span> <span class="twoword">hó</span> <span class="twoword">hý</span> <span class="twoword">hæ</span>
   </div>
   <div class="twoline">
   <span class="twoword">ið</span> <span class="twoword">il</span> <span class="twoword">im</span>
   </div>
   <div class="twoline">
   <span class="twoword">íð</span> <span class="twoword">íl</span> <span class="twoword">ím</span> <span class="twoword">ís</span>
   </div>
   <div class="twoline">
   <span class="twoword">já</span> <span class="twoword">jó</span> <span class="twoword">jú</span>
   </div>
   <div class="twoline">
   <span class="twoword">ká</span> <span class="twoword">ku</span> <span class="twoword">kú</span>
   </div>
   <div class="twoline">
   <span class="twoword">la</span> <span class="twoword">lá</span> <span class="twoword">lé</span> <span class="twoword">ló</span> <span class="twoword">lý</span> <span class="twoword">læ</span>
   </div>
   <div class="twoline">
   <span class="twoword">má</span> <span class="twoword">mi</span> <span class="twoword">mó</span> <span class="twoword">mý</span>
   </div>
   <div class="twoline">
   <span class="twoword">ná</span> <span class="twoword">né</span> <span class="twoword">nó</span> <span class="twoword">nú</span> <span class="twoword">ný</span> <span class="twoword">næ</span>
   </div>
   <div class="twoline">
   <span class="twoword">of</span> <span class="twoword">og</span> <span class="twoword">ok</span> <span class="twoword">op</span> <span class="twoword">or</span>
   </div>
   <div class="twoline">
   <span class="twoword">óa</span> <span class="twoword">óð</span> <span class="twoword">óf</span> <span class="twoword">ói</span> <span class="twoword">ók</span> <span class="twoword">ól</span> <span class="twoword">óm</span> <span class="twoword">ón</span> <span class="twoword">óp</span> <span class="twoword">ós</span> <span class="twoword">óx</span>
   </div>
   <div class="twoline">
   <span class="twoword">pí</span> <span class="twoword">pu</span> <span class="twoword">pú</span>
   </div>
   <div class="twoline">
   <span class="twoword">rá</span> <span class="twoword">re</span> <span class="twoword">ré</span> <span class="twoword">rí</span> <span class="twoword">ró</span> <span class="twoword">rú</span> <span class="twoword">rý</span> <span class="twoword">ræ</span>
   </div>
   <div class="twoline">
   <span class="twoword">sá</span> <span class="twoword">sé</span> <span class="twoword">sí</span> <span class="twoword">so</span> <span class="twoword">sú</span> <span class="twoword">sý</span> <span class="twoword">sæ</span>
   </div>
   <div class="twoline">
   <span class="twoword">tá</span> <span class="twoword">te</span> <span class="twoword">té</span> <span class="twoword">ti</span> <span class="twoword">tí</span> <span class="twoword">tó</span> <span class="twoword">tý</span>
   </div>
   <div class="twoline">
   <span class="twoword">um</span> <span class="twoword">un</span>
   </div>
   <div class="twoline">
   <span class="twoword">úa</span> <span class="twoword">úð</span> <span class="twoword">úf</span> <span class="twoword">úi</span> <span class="twoword">úr</span> <span class="twoword">út</span>
   </div>
   <div class="twoline">
   <span class="twoword">vá</span> <span class="twoword">vé</span> <span class="twoword">ví</span> <span class="twoword">vó</span>
   </div>
   <div class="twoline">
   <span class="twoword">yl</span> <span class="twoword">ym</span> <span class="twoword">yr</span> <span class="twoword">ys</span>
   </div>
   <div class="twoline">
   <span class="twoword">ýf</span> <span class="twoword">ýg</span> <span class="twoword">ýi</span> <span class="twoword">ýk</span> <span class="twoword">ýl</span> <span class="twoword">ýr</span> <span class="twoword">ýs</span> <span class="twoword">ýt</span>
   </div>
   <div class="twoline">
   <span class="twoword">þá</span> <span class="twoword">þó</span> <span class="twoword">þú</span> <span class="twoword">þý</span>
   </div>
   <div class="twoline">
   <span class="twoword">æð</span> <span class="twoword">æf</span> <span class="twoword">æg</span> <span class="twoword">æi</span> <span class="twoword">æl</span> <span class="twoword">æp</span> <span class="twoword">ær</span> <span class="twoword">æs</span> <span class="twoword">æt</span>
   </div>
   <div class="twoline">
   <span class="twoword">öl</span> <span class="twoword">ör</span> <span class="twoword">ös</span> <span class="twoword">öt</span> <span class="twoword">öx</span>
   </div>
   </div>
   </div>

   <div id="tabs-3">
   <p>Nýlegar viðureignir þínar - smelltu til að skoða og rifja upp:</p>
<div class="listitem listheader"><span class="list-ts">Viðureign hófst</span><span class="list-opp">Andstæðingur</span><span class="list-scorehdr">Úrslit</span></div>
{% for uuid, ts, opp, opp_is_robot, s0, s1 in recent_games %}
<div class="listitem {{ loop.cycle('oddlist', 'evenlist') }}"><a href="{{ url_for('review', game = uuid) | safe }}"><span class="list-ts">{{ts}}</span><span class="list-opp">
{%- if opp_is_robot -%}
<span class="glyphicon glyphicon-cog"></span>&nbsp;
{%- endif -%}
{{ opp }}</span><span class="list-s0">{{s0}}</span>:<span class="list-s1">{{s1}}</span></a>
</div>
{% endfor %}
   </div>

   <div id="tabs-4">
   <p id="initials"><span id="fav">Uppáhalds</span>
   <span>a-á</span>
   <span>b-c</span>
   <span>d-ð</span>
   <span>e-é</span>
   <span>f</span>
   <span>g</span>
   <span>h</span>
   <span>i-í</span>
   <span>j</span>
   <span>k</span>
   <span>l</span>
   <span>m</span>
   <span>n</span>
   <span>o-ó</span>
   <span>p-q</span>
   <span>r</span>
   <span>s</span>
   <span>t</span>
   <span>u-ú</span>
   <span>v-w</span>
   <span>x-z</span>
   <span>þ</span>
   <span>æ</span>
   <span>ö</span>
   </p>
   <div class="listitem listheader">
   <span class="list-fav"><span class='glyphicon glyphicon-star-empty'></span></span><span class="list-nick">Einkenni</span><span class="list-fullname">Nafn</span>
   </div>
   <!-- User list will be inserted here -->
   <div id="userlist"></div>
   </div>

   </div>

</div>

{% endblock %}

{% block endscripts %}

<script>

var entityMap = {
   "&": "&amp;",
   "<": "&lt;",
   ">": "&gt;",
   '"': '&quot;',
   "'": '&#39;',
   "/": '&#x2F;'
};

function escapeHtml(string) {
   /* Utility function to properly encode a string into HTML */
   return String(string).replace(/[&<>"'\/]/g, function (s) {
      return entityMap[s];
   });
}

function populateUserList(json) {
   if (!json || json.result === undefined)
      return;
   if (json.result !== 0)
      /* Probably out of sync or login required */
      /* !!! TBD: Add error reporting here */
      return;
   for (var i = 0; i < json.userlist.length; i++) {
      var item = json.userlist[i];
      var fav = "<span class='glyphicon glyphicon-star" +
         ((!item.fav) ? "-empty" : "") +
         "' onclick='markFavorite(this, \"" + item.userid + "\")'></span>";
      var str = "<div class='listitem " + ((i % 2 === 0) ? "oddlist" : "evenlist") + "'>" +
         "<span class='list-fav'>" + fav + "</span>" +
         "<span class='list-nick'>" + escapeHtml(item.nick) + "</span>" +
         "<span class='list-fullname'>" + escapeHtml(item.fullname) + "</span>" +
         "</div>";
      $("#userlist").append(str);
   }
}

function markFavorite(elem, uid) {
   /* Toggle a favorite mark for the indicated user */
   if ($(elem).hasClass("glyphicon-star-empty")) {
      $(elem).removeClass("glyphicon-star-empty");
      $(elem).addClass("glyphicon-star");
      /* !!! TBD: send a mark-favorite packet to the server */
   }
   else {
      $(elem).removeClass("glyphicon-star");
      $(elem).addClass("glyphicon-star-empty");
      /* !!! TBD: send an unmark-favorite packet to the server */
   }
}

function refreshUserList(ev) {
   /* Erase existing user list, if any */
   $("#userlist").html("");
   /* Establish the alphabet range that we want to display */
   var range = ev.data;
   var from_range = range ? range.charAt(0) : null;
   var to_range = from_range;
   if (range && range.length == 3)
      to_range = range.charAt(2);
   $.ajax({
      // the URL for the request
      url: "/userlist",

      // the data to send
      data: {
         // Identify the game in question
         from: from_range,
         to: to_range
      },

      // whether this is a POST or GET request
      type: "POST",

      // the type of data we expect back
      dataType : "json",

      cache: false,

      // code to run if the request succeeds;
      // the response is passed to the function
      success: populateUserList,

      // code to run if the request fails; the raw request and
      // status codes are passed to the function
      error: function(xhr, status, errorThrown) {
         alert("Villa í netsamskiptum");
         console.log("Error: " + errorThrown);
         console.log("Status: " + status);
         console.dir(xhr);
      },

      // code to run regardless of success or failure
      complete: function(xhr, status) {
      }
   });
}

$("#tabs").tabs();

$("#initials").find("span").each(function() {
   var data = $(this).text();
   if ($(this).attr('id') == 'fav')
      data = null; // Asking for list of favorite users
   $(this).click(data, refreshUserList);
});

</script>

{% endblock %}

